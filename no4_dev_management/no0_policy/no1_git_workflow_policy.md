# Git 工作流規範

## 核心原則

- **分支模型:** 採用 GitHub Flow
- **主要分支:** `main`
- **`main` 分支保護:**
    - **屬性:** 永遠處於可部署狀態
    - **禁止:** 直接推送 Commit
    - **要求:** 所有變更必須通過 Pull Request 合併

## 開發流程

- **建立分支 Branch**
    - **觸發:** 開始新功能開發或錯誤修復
    - **行為:**
        - 從 `main` 分支拉取最新程式碼
        - 建立新的功能分支
    - **分支命名:**
        - **功能:** `feature/功能名稱`
        - **修復:** `fix/錯誤名稱`
        - **重構:** `refactor/重構範圍`
- **本地開發 Local Dev**
    - **行為:**
        - 在功能分支上進行開發與 Commit
    - **Commit 訊息:**
        - **要求:** 必須清晰且有意義
        - **格式:** `類型: 描述`
        - **範例:** `feat: 實作登入畫面`
        - **範例:** `fix: 修正金額計算錯誤`
- **發起 Pull Request**
    - **觸發:** 功能開發完成
    - **行為:**
        - 將功能分支推送至遠端
        - 建立 Pull Request 指向 `main` 分支
    - **PR 描述:**
        - **要求:** 必須填寫 PR 模板
        - **內容:** 說明此 PR 的目的與變更範圍
- **程式碼審查 Code Review**
    - **要求:** 至少需要一名團隊成員審查
    - **審查者:**
        - **行為:** 檢查程式碼品質、風格、與規格是否相符
    - **PR 作者:**
        - **行為:** 根據審查意見修改程式碼並推送新 Commit
- **合併至 `main` Merge**
    - **觸發:** PR 獲得批准
    - **行為:**
        - **合併方式:** 使用 `Squash and merge`
        - **機制:** 將分支上的多個 Commit 合併為一個有意義的 Commit 訊息
    - **PR 作者:**
        - **行為:** 刪除已合併的功能分支
- **部署 Deploy**
    - **觸發:** `main` 分支有新 Commit 時
    - **行為:** 自動化 CI/CD 流程將 `main` 分支部署至生產環境
    - **說明:** 部署應由自動化工具執行

## 緊急修復 Hotfix

- **情境:** 生產環境出現緊急錯誤
- **流程:**
    - **行為:**
        - 立即從 `main` 建立 `hotfix/錯誤名稱` 分支
        - 修復錯誤並立即建立 PR
        - 緊急審查並合併回 `main`
        - 觸發自動化部署