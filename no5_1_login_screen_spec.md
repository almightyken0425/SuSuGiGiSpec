# 登入畫面規格: LoginScreen

## UI 佈局

* **視覺中心:** App Logo 或名稱

* **登入按鈕:** 使用 Google 登入

## 核心互動與流程

* **App 啟動:**
  * **檢查:** 使用者是否已有有效登入狀態
  * **IF** 已登入:
    * **導航:** HomeScreen
    * **觸發:** App 啟動檢查流程
    * **HomeScreen:**
      * **讀取:** 立即從 本機 DB 讀取資料並顯示 UI
  * **IF** 未登入:
    * **顯示:** LoginScreen

* **使用者點擊 Google 登入:**
  * **觸發:** authService.signInWithGoogle

* **認證流程:**
  * **行為:** 彈出 Google 帳號選擇視窗
  * **觸發:** 使用者選擇帳戶並同意授權

* **認證成功:**
  * **行為:** authService 取得 UserId
  * **觸發:** 首次登入流程
    * **IF** 新用戶:
      * **行為:**
        * 在 本機 DB 建立預設資料
        * 不執行任何雲端上傳或同步
    * **IF** 舊用戶:
      * **行為:** 不執行任何操作
      * **備註:** 資料將於升級 Premium 並首次觸發同步時下載
  * **狀態更新:** AuthContext 更新為 已登入

* **導航:** AppNavigator 偵測到登入狀態改變, 自動導航至 HomeScreen

## 錯誤處理

* **使用者取消登入:**
  * **行為:** 停留在登入畫面
  * **提示:** 可選 Toast 登入已取消

* **網路錯誤:**
  * **提示:** 顯示 請檢查網路連線

* **認證失敗:**
  * **提示:** 顯示 登入失敗, 請稍後再試