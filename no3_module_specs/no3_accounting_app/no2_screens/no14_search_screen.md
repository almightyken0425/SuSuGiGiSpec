# 搜尋畫面規格: SearchScreen

## 畫面目標

- **提供:** 搜尋所有交易與轉帳備註 Note 欄位的介面
- **允許:** 從搜尋結果導航至該筆紀錄的編輯畫面

## UI 佈局

- **頂部導航列:**
    - **內部元件:**
        - **返回按鈕**
            - **導航:** 前一頁
        - **搜尋輸入框**
            - **UI:** TextInput
            - **提示:** 搜尋備註...
            - **互動:** autoFocus, 進入時自動彈出鍵盤
- **搜尋結果區:**
    - **UI:** 可滾動列表, FlatList
    - **空狀態:**
        - **預設:**
            - **顯示:** 請輸入關鍵字以搜尋交易備註。
        - **無結果:**
            - **顯示:** 找不到符合 [關鍵字] 的紀錄。
    - **結果列表:**
        - **UI:** 顯示所有符合關鍵字的交易與轉帳紀錄
        - **排序:** 依 `transactionDate` 降冪排列
        - **項目內容:**
            - **內部元件:**
                - **圖示**
                - **名稱區域:**
                    - **UI:** 垂直排列
                    - **上方:** 類別名稱 或 轉帳
                    - **下方:** 備註 Note, 關鍵字高亮
                - **金額日期區:**
                    - **UI:** 垂直排列
                    - **上方:** 金額, 原始幣別
                    - **下方:** 日期

---

## 核心邏輯

- **資料搜尋:**
    - **觸發:** 搜尋框輸入文字
    - **備註:** 建議 debounce 300ms
    - **來源:** 本機 DB
    - **範圍:** `Transactions` + `Transfers`
    - **過濾:**
        - `note` 欄位包含關鍵字, 不分大小寫
        - `deletedOn` 為 null
    - **效能:** `note` 欄位應建立索引
- **導航邏輯:**
    - **觸發:** 點擊任一筆搜尋結果
    - **IF** `Transaction` 紀錄:
        - **導航:** TransactionEditorScreen
        - **參數:** transactionId
    - **IF** `Transfer` 紀錄:
        - **導航:** TransferEditorScreen
        - **參數:** transferId

---

## 狀態管理

- **本地狀態:**
    - `searchText`
    - `results`
    - `isLoading`