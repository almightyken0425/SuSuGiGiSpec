# 登入認證後邏輯

- **觸發:** 認證成功時，由 LoginScreen.md 觸發
- **IF** 新用戶:
    - **行為:** 執行 建立預設資料 至 本機 DB
    - **主要幣別 Primary Currency:**
        - **來源:** 嘗試從 裝置 的 Locale 設定中 取得 幣別代碼 Currency Code
        - **設定:**
            - **IF** 成功取得 幣別代碼
                - **行為:** 用戶 主要幣別 設為 取得的幣別代碼
            - **ELSE** 無法從 Locale 取得
                - **行為:** 用戶 主要幣別 設為 系統預設幣別 (例如 TWD)
    - **資料建立:**
        - **帳戶:** 現金
        - **類別:** 食, 衣, 住, 行
    - **語系:** 讀取裝置 Device 的 Locale 語言設定
        - **IF** 裝置語言 存在於 App 支援列表
            - **行為:** App 語言 設為 裝置語言
        - **ELSE** App 支援裝置的語言
            - **行為:** App 語言 設為 系統預設語言
    - **時區 Timezone:**
        - **來源:** 讀取 裝置 的 時區設定
        - **設定:** App 預設時區 設為 裝置時區
    - **行為:** 不執行任何雲端上傳或同步
- **IF** 免費舊用戶:
    - **行為:** 不執行任何操作
- **IF** 付費舊用戶:
    - **行為:** 觸發同步與定期交易