# 首頁篩選畫面: HomeFilterScreen

## 畫面目標

- **提供:** 首頁報表的篩選與檢視設定
- **允許:** 切換時間粒度、篩選特定帳戶、切換列表分組模式

```text
+---------------------------------------+
|             Filter Report       Done  |
+---------------------------------------+
| Time Granularity:                     |
| [Day] [Week] [Month] [Year] [All]     |
|                                       |
| Chart Source:                         |
| [Expense] [Income]                    |
|                                       |
| Accounts:                             |
| [x] Select All                        |
| [x] Account A                         |
| [ ] Account B                         |
|                                       |
| Group By:                             |
| [Date] [Category]                     |
+---------------------------------------+
```

---

## UI 佈局

- **頂部導航列:**
    - `標題` 篩選報表
    - `完成按鈕`
        - **導航:** 關閉 Modal
- **時間粒度:**
    - **UI:** Segmented Control
    - **選項:** 日、週、月、年、全部
    - **屬性:** 單選
    - **行為:** 選擇後立即更新報表狀態
- **圖表來源:**
    - **UI:** Segmented Control
    - **選項:** 支出、收入
    - **預設:** 支出
    - **屬性:** 單選
    - **行為:** 選擇後立即更新報表狀態，影響圓餅圖來源與圖示顯示顏色
- **帳戶篩選:**
    - **UI:** Checkbox
    - **選項:** 帳戶名稱、全選
    - **屬性:** 多選
    - **行為:** 勾選後立即更新報表狀態
- **列表分組:**
    - **UI:** Segmented Control
    - **選項:** 日期分組、類別分組
    - **屬性:** 單選
    - **行為:** 選擇後立即更新報表狀態

---

## 核心邏輯

- **篩選邏輯:**
    - **即時更新:**
        - **觸發:** 任一篩選條件變更
        - **行為:** 立即更新 `HomeScreen` 的篩選狀態 Context 或 Global State
        - **結果:** `HomeScreen` 背景自動重新查詢與渲染
    - **帳戶篩選:** 排除 `deletedOn` 或 `disabledOn` 非 null 的帳戶
- **預設值:**
    - **時間粒度:** 當日 daily
    - **帳戶篩選:** 僅選取 `sortOrder` 最高的帳戶
    - **列表分組:** 類別分組
    - **圖表來源:** 支出

---

## 導航

- **進入:**
    - **來源:** HomeScreen 頂部 Header 篩選按鈕
    - **呈現:** Modal
- **退出:**
    - **觸發:** 點擊返回按鈕或向下滑動關閉
    - **導航:** 關閉 Modal
