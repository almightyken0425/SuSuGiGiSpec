# 規格撰寫規範

本文件定義了規格文件的統一撰寫標準，旨在最大化「可維護性」與「可讀性」。

## 核心原則

- **易維護性優先:** 文件的結構應優先考慮未來的修改成本。避免使用任何會導致「連鎖修改」的寫法，例如數字編號。
- **元件導向:** 以元件或功能區塊為最小單位來組織文件。
- **原子化:** 盡可能讓一個條目，一行，只傳達一個規格屬性。
- **隱含順序:** 條列的**視覺順序**即代表其在 UI 上的**佈局順序**，由上至下, 由左至右。

## 絕對禁止項目

- **禁止括號:**
    - **嚴禁**使用任何括號或引號，例如 `()` `[]` `「」`。
    - **補充說明**應改為 `*備註:**`，或直接整合進規格描述中。
- **禁止編號:**
    - **嚴禁**使用有序列表或編號，例如 `1.` `2.` `A.` `B.`。
    - **所有列表**均使用  無序列表。
- **禁止位置描述:**
    - **嚴禁**使用 `左:` `中:` `右:` 或 `頂部:` `底部:` 來描述元件在佈局中的**相對位置**。
    - **元件的佈局**應由其在 `*內部元件:**` 或 `*結構:**` 列表中的「條列順序」決定。
- **禁止金錢符號:**
    - **嚴禁**使用金錢符號於範例或 UI 描述中。
- **禁止「最終」狀態詞:**
    - **嚴禁**在標題或檔案名稱中使用 `Final` 或 `最終版` 等代表最終的狀態詞。
    - **備註:** 使用 `V1`, `V2` 等數字版本號是允許的。

## 關鍵字

- **一律粗體:** 所有的關鍵字，例如 `*結構:**` `*行為:**` `*IF:**` 等，**必須**使用粗體並包含冒號。
- **`*結構:**`**
    - **用途:** 描述一個區塊的靜態佈局或其子元件列表。
- **`*行為:**`**
    - **用途:** 描述一個區塊的動態邏輯、資料處理或互動。
- **`*內部元件:**`**
    - **用途:** `*結構:**` 的同義詞，推薦用於描述父元件內的子元件列表。
- **`*IF / ELSE:**`**
    - **用途:** 用於描述條件邏輯。
- **`*備註:**`**
    - **用途:** 用於補充說明，但應極力避免。若條列順序已能清楚表達，則不需備註。
    - **範例:** `*備註:** A 在 B 之上` 是多餘的。

## 撰寫範例

### 範例: 佈局

- **禁止**
    
    ```
    * **Modal 頂部導航列:**
      * **左:** 取消按鈕
      * **中:** 標題
      * **右:** 完成按鈕
    
    ```
    
- **推薦**
    - **備註:** 條列順序即代表佈局順序: 左 -> 中 -> 右
    
    ```
    * **Modal 頂部導航列:**
      * **內部元件:**
        * **取消按鈕**
        * **標題**
        * **完成按鈕**
    
    ```
    

### 範例: 邏輯分組

- **禁止**
    - **備註:** 重複且扁平
    
    ```
    * **顯示模式:**
      * **選項: 按類別分組**
        * **聚合:** 依 `categoryId`
        * **互動:** 可展開
      * **選項: 按日期分組**
        * **聚合:** 依 `transactionDate`
        * **互動:** 可展開
    
    ```
    
- **推薦**
    - **備註:** 合併共用屬性，建立子集
    
    ```
    * **顯示模式:**
      * **屬性:** 可切換
      * **預設:** 類別分組
      * **分組:**
        * **按類別**
          * **聚合:** 依 `categoryId`
        * **按日期**
          * **聚合:** 依 `transactionDate`
      * **互動:** 可展開
    
    ```
    

### 範例: 屬性

- **禁止**
    
    ```
    * **項目 UI 內容:**
      * ...
      * **選填:** 帳戶
      * **選填:** 備註
    
    ```
    
- **推薦**
    - **備註:** 未標記 `*必填:**` 的項目，均默認為選填
    
    ```
    * **項目 UI 內容:**
      * ...
      * 帳戶
      * 備註
    
    ```
    

### 範例: 空白

- **推薦**
    - 允許在邏輯區塊、屬性之間使用「單一空白行」來增加視覺區隔性，提升可讀性。
    
    ```
    * **核心佈局:**
    
      * **頂部 Header:**
        * **位置:** 螢幕頂部。
    
        * **內部元件:**
          * `報表篩選按鈕`
          * `App 名稱 / Logo`
    
    ```
    

### 範例: 關鍵字分組

- **禁止**
    - **備註:** 重複的關鍵字
    
    ```
    * **選項 - 此筆及未來所有 - 編輯:**
      * **行為:** 將原 Schedule 的 EndOn 設為此交易日期的前一週期
      * **行為:** 根據新內容創建一個新 Schedule
      * **行為:** 不修改任何歷史記錄
    
    ```
    
- **推薦**
    - **備註:** 使用縮排群組
    
    ```
    * **選項 - 此筆及未來所有 - 編輯:**
      * **行為:**
        * 將原 Schedule 的 EndOn 設為此交易日期的前一週期
        * 根據新內容創建一個新 Schedule
        * 不修改任何歷史記錄
    
    ```
    
- **禁止**
    - **備註:** 重複的前綴
    
    ```
    * **時區:**
      * **功能:** 設定主要時區
      * **應用 - 顯示:** ...
      * **應用 - 計算:** ...
      * **應用 - 定期交易:** ...
    
    ```
    
- **推薦**
    - **備註:** 使用縮排群組
    
    ```
    * **時區:**
      * **功能:** 設定主要時區
      * **應用:**
        * **顯示:** ...
        * **計算:** ...
        * **定期交易:** ...
    
    ```
    
- **禁止**
    - **備註:** 重複的前綴
    
    ```
    * **報表計算方式:**
      * **過濾:** 逐筆檢查
      * **條件:** TransactionDate 於時間範圍內
      * **條件:** AccountId 於帳戶列表內
      * **條件:** DeletedOn 為 null
    
    ```
    
- **推薦**
    - **備註:** 使用縮排群組
    
    ```
    * **報表計算方式:**
      * **過濾:** 逐筆檢查
        * TransactionDate 於時間範圍內
        * AccountId 於帳戶列表內
        * DeletedOn 為 null
    
    ```
    

### 範例: 關鍵字省略

- **禁止**
    - **備註:** 關鍵字多餘
    
    ```
    ## 搜尋交易
    * **行為:** 僅搜尋 Note 欄位。
    
    ```
    
- **推薦**
    - **備註:** 標題已定義行為
    
    ```
    ## 搜尋交易
    * 僅搜尋 Note 欄位。
    
    ```
    
- **禁止**
    - **備註:** 關鍵字多餘
    
    ```
    * **金額加總:**
      * **行為:** 依 CategoryType 分別加總。
    
    ```
    
- **推薦**
    - **備註:** 標題已定義行為
    
    ```
    * **金額加總:** 依 CategoryType 分別加總。
    
    ```