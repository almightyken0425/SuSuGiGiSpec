# 匯率編輯器規格: CurrencyRateEditorScreen

## 畫面目標

- **提供:** 新增 或 更新 特定貨幣對匯率的介面
- **確保:** 使用者輸入的資料有效且完整

## UI 佈局

- **頂部導航列:**
    - **內部元件:**
        - **取消按鈕**
            - **導航:** CurrencyRateListScreen
        - **標題**
            - **內容:** 設定匯率
        - **儲存按鈕**
- **貨幣對顯示區:**
    - **UI:** 兩個並排的不可編輯區塊
    - **內部元件:**
        - **來源貨幣 From**
        - **目標貨幣 To**
    - **邏輯:**
        - **IF** 從列表進入:
            - **行為:** 顯示被點擊的貨幣對
        - **IF** 從新增按鈕進入:
            - **行為:** 允許使用者選擇貨幣對
- **匯率輸入區:**
    - **UI:** 數字輸入框
    - **標籤:** 1 [來源貨幣] =
- **日期選擇器:**
    - **UI:** 日期選擇元件
    - **預設值:** 今天

## 核心邏輯

- **模式判斷:**
    - **觸發:** 畫面載入
    - **檢查:** 傳入的參數
    - **IF** 傳入 `rateId` 或 貨幣對資訊 更新模式:
        - **行為:** 載入該貨幣對並填充欄位
        - **備註:** 儲存時仍為 新增 操作
- **儲存邏輯:**
    - **觸發:** 點擊 儲存按鈕
    - **驗證:**
        - 匯率為有效數字
        - 匯率大於 0
    - **儲存:**
        - **行為:** 
          - 於 本機 DB 的 `CurrencyRates` 表 新增一筆記錄
          - 一律為新增 Append-Only
        - **欄位:** 必須設定 `updatedOn`
    - **成功:**
        - **導航:** 返回 CurrencyRateListScreen
        - **觸發:** CurrencyRateListScreen 資料重新整理
- **刪除策略:**
    - **行為:** 不提供刪除按鈕

## 狀態管理

- **本地狀態:**
    - `rate`
    - `rateDate`

## 導航

- **進入:**
    - **來源:** CurrencyRateListScreen 新增按鈕 或 列表項目
- **退出:**
    - **觸發:** 點擊 取消按鈕 或 儲存按鈕
    - **導航:** CurrencyRateListScreen